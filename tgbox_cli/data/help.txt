[Y0br]TGBOX-CLI README[X]
    Hi and Welcome to the short TGBOX-CLI README! This file
    intended to help you to get info about this program.

[W0b]What is TGBOX?[X]
    TGBOX (TelegramBox) is a non-official API to the encrypted
    cloud storage around the Telegram messenger written on
    a Python programming language by me, author of this
    CLI app! In sake of a DRY principle, we will not cover
    here API documentation. If you wonder what is a TGBOX
    in depth, then feel free to check the docs:
        [B0b]tgbox.readthedocs.io/en/latest/index.html[X]
        [B0b]github.com/NonProjects/tgbox[X]

[W0b]What should you know about CLI design[X]
    The CLI (or a Command-Line Interface) is an interface
    that operates with the text input, mostly from the
    user. Unlike the GUI (which is a Graphical Interface),
    all interactions with the program are hidden behind the
    raw commands. That's it! You don't even need to use
    your mouse! Using a CMD may seem kinda hard for a green
    users, so if you one of those, -- take a time to read
    about CLI and Terminals right from the Wikipedia:
        [B0b]en.wikipedia.org/wiki/Command-line_interface[X]

[W0b]Working with TGBOX-CLI[X]
    TGBOX-CLI App (as .EXE or just with Python) internally
    doesn't change while working with -- all data is stored
    inside the produced by the API files (LocalBox), so you
    may remove the *executable* at any time, this will not
    affect your saved to Local and pushed to Remote files.

    TGBOX-CLI is a portable: you may drop the .EXE file
    to your USB flash drive and run on any supported OS.

    The Local database (LocalBox) stores encrypted by your
    key data. Feel free to save it in a place that can't
    be trusted. [R0b]Make sure to use a good encryption key[X].


[W0b]ENVIRONMENT VARIABLES[X]
    As many CLI applications, TGBOX-CLI supports some environment
    variables. You can set them in your CMD with the "[M0b]set[X]" (Windows)
    or "[M0b]export[X]" (UNIX) commands. See more on Wikipedia:
        [B0b]en.wikipedia.org/wiki/Environment_variable#Syntax[X]

    TGBOX-CLI supports the next environment variables:
        [W1b]http_proxy[X] (or [W1b]https_proxy[X]): setup Proxy (Google for format)
        [W1b]TGBOX_CLI_SHOW_PASSWORD[X]: any value will disable hidden input
        [W1b]TGBOX_CLI_DEBUG[X]: any value will enable full error Traceback
        [W1b]TGBOX_CLI_NOCOLOR[X]: any value will disable colored output
        [W1b]TGBOX_CLI_LOGFILE[X]: a full path to logging file
        [W1b]TGBOX_CLI_LOGLEVEL[X]: setup logging level (DEBUG/INFO/...etc)
        [W1b]TGBOX_CLI_SK[X]: SessionKey. Will be installed on initialization

    [X1b]! Ordinary users may only need the first var to set up Proxy[X]
    [X1b]  and TGBOX_CLI_SHOW_PASSWORD to make input visible[X]

[W0b]COMMANDS & USAGE[X]
    [X1b]! Write a [X][W0b]tgbox-cli.exe[X] [X1b]if you have .EXE file[X]

    Try to run a TGBOX-CLI without arguments:
        [W1b]tgbox-cli[X]

    As a result, you should see a list of commands. If
    you see an error with text something like "Sorry,
    we don't know such program/file" then locate to
    a folder with executable, open CMD in it and run
    & try once again.

    You can use a [G0b]--help[X] option with every command
    to get detailed information about them. Let's
    take a look at first command: the [B0b]cli-init[X],
    which activates environment for a TGBOX-CLI app:
        [W1b]tgbox-cli cli-init --help[X]

    [X1b]! Use a --help every time when you don't understand or[X]
    [X1b]  forgot some command. Fall to this README for examples.[X]

    Some [B0b]commands[X] will require you to specify [G0b]options[X],
    some will prompt you if you don't specify them.

    [X1b]! Press CTRL+C to stop any command and return to shell.[X]

    [W0b]QUICK INTRO[X]
        [M0b]|||||| Pure Start ||||||[X]

        Start with a [B0b]cli-init[X]:
            [W1b]tgbox-cli cli-init[X]

        This will give you commands for session initialization.
        Write to your terminal proposed ones. Session will
        store your encryption keys, so you don't need to
        enter it every time. Your session will be destroyed
        when you will close your command line.

        [R0b]We encrypt your Box keys and some other sensitive[X]
        [R0b]information used in session with a TGBOX_CLI_SK key. It[X]
        [R0b]is stored in the environment variables, so ANY program[X]
        [R0b]you will run in initialized CMD may receive a FULL[X]
        [R0b]access to all your keys. To prevent this, always use[X]
        [R0b]a *new* command line instance and DON'T use anything[X]
        [R0b]except the TGBOX-CLI and system tools in initialized CMD.[X]

        [X1b]This is unlikely to happen, but such attack can be done.[X]

        [R0b]Make sure you TRUST the TGBOX-CLI build before going further[X]

        [M0b]|||||| Connecting Account ||||||[X]

        Didn't create any Box? Connect your Telegram account:
            [W1b]tgbox-cli account-connect[X]

        This command will prompt you for phone number linked to
        your Telegram account, login code, and password.

        You can specify custom [W0b]API_ID[X] and [W0b]API_HASH[X] on this command
        with ([G0b]--api-id[X] & [G0b]--api-hash[X]) if you want or need to.

        You can connect as many accounts as you want,
        as well as switch between them with the simple
        [B0b]account-switch[X] command.

        [Y0b]You can disable TGBOX-CLI session at any time via[X]
        [Y0b]Telegram Settings -> Devices if you will need it.[X]

        [M0b]|||||| Making Box ||||||[X]

        You already connected an account? Well, it's time to make your
        first Box with the new [B0b]box-make[X] command! Try this:
            [W1b]tgbox-cli box-make[X]

        [B0b]box-make[X] command without any [G0b]options[X] will prompt you
        firstly for the name of your new Box. Let's try to specify
        it with [G0b]option[X], so you can understand how it works:
            [W1b]tgbox-cli box-make --box-name=MyBox[X]

        This will omit "Box name" prompt. Many [G0b]options[X] can be
        [W0b]long[X] (with a [W0b]two[X] dashes [G0b]--[X]) and [W0b]short[X] ([W0b]one[X] dash [G0b]-[X]) at
        the same time. With a [G0b]--help[X] on [B0b]box-make[X] we can see that
        we can write a [G0b]--box-name[X] as [G0b]-b[X]:
            [W1b]tgbox-cli box-make -b=MyBox[X]

        [X1b]In this README we will write all options in a long variant,[X]
        [X1b]I believe that this will be easier to learn. Keep in mind[X]
        [X1b]that you can express them in a short way too![X]

        In the next step, the TGBOX-CLI will offer you a randomly
        generated passphrase. You can accept it or specify your
        own. If your choice is a second option, then [R0b]make sure
        to specify a strong encryption password[X], because your
        LocalBox will store a [R0b]Telegram session[X] and file info. The
        key generation process will require you to give a [R0b]1GB of RAM[X]
        for a couple of seconds. You can decrease the amount or make it
        even bigger with the [B0b]box-make[X] command [G0b]options[X]. Setting
        [Y0b]lower amounts of MB per generation will make brute-forcing[X]
        [Y0b]a more easy deal[X], change it only if you're understand
        this. [Y0b]Make sure to have a free RAM[X] if you're having an old
        machine, because this may freeze it down until reboot.

        As a result of [B0b]box-make[X] command, you should receive a
        LocalBox file on your computer and private channel (
        the RemoteBox) on your Telegram account. You don't
        need to directly work with RemoteBox at all. All you
        need is just connect your LocalBox and execute the
        [B0b]commands[X]. As well as with accounts, you can list,
        connect more than one and switch your Boxes. See a
        [W1b]tgbox-cli --help[X] for a list of available [B0b]commands[X].

        Later you will need to use a [B0b]box-open[X] to open
        your LocalBox and access files. This one is easy,
        try to close your shell, open it again and connect
        your LocalBox, then go further.

        [M0b]|||||| Uploading Files ||||||[X]

        It's time to upload our first file. Let's see how:
            [W1b]tgbox-cli file-upload path/to/your/file[X]

        Path here is a [C0b]target[X]. Add as much targets as you want:
            [W1b]tgbox-cli file-upload TARGET_1 TARGET_2 ...[X]

        Argument [C0b]target[X] will allow you to specify a path(s) to
        a file(s) that will be prepared, encrypted and pushed to
        your RemoteBox channel. This will work not only for a
        file, but for [W0b]directories too[X]! You can specify a path
        to a folder and CLI will upload all dirs/files from it.

        [Y0b]Please note that uploading one big file is always better[X]
        [Y0b]than a thousand of small[X] because we're working around the
        Telegram messenger, and [W0b]not[X] over the real file server. You
        may end up with a Box that will be really hard to work on
        if your channel will contain i.e. 100,000 files or even more
        [X1b](Limit on messages is 1M. Do not treat this as challenge :)[X]
        |
        [Y0b]If you have a really big amount of small files[X], --
        [Y0b]consider to ZIP them firstly[X], then upload.

        We can also attach a special attributes -- CAttrs (or
        the "CustomAttributes") to a file before uploading:
            [W1b]tgbox-cli file-upload Scripts/ --cattrs="tag: code"[X]

        This will add CAttr with key "tag" and value "code"
        to every file from the folder Scripts/ on upload,
        so you can later search for them with a [B0b]command[X].

        [W0b]Please note[X] that CAttrs should be separated by the "[W0b]|[X]"
        symbol. For example: [W0b]"tag: image | message: It's pretty!"[X]

        If the file was already pushed to RemoteBox and was changed
        since then ([W0b]in size[X]), the [B0b]file-upload[X] will [W0b]auto update[X]
        (make a [W0b]full re-upload[X] of) it. You can disable this by
        specifying [G0b]--no-update[X] flag on [B0b]file-upload[X]. There is
        also the [G0b]--force-update[X] flag, which will force to
        update every [C0b]target[X] file on upload.

        You can use [C0b]filters[X] to control which files will be uploaded
        to your Box. [B0b]file-upload[X] has [W0b]eight[X] [C0b]filters[X] in total. For
        example, to upload [W0b]only[X] images from specified path you
        can use this command (example):
            [W1b]tgbox-cli file-upload Music/ +i mime=image[X]

        See next, [M0b]Searching Files[X] chapter to master
        [C0b]filters[X] usage. Please note that in [B0b]file-upload[X],
        [C0b]they[X] should be placed [W0b]after[X] TARGET and [W0b]always[X]
        include either [C0b]+i[X] ([C0b]++include[X]) or [C0b]+e[X] ([C0b]++exclude[X]).

        Those who want to control file uploading at expert
        level should know about [W0b]balancing[X]. In a theory, we
        can upload simultaneously as many files as we want,
        but in reality the Telegram servers [W0b]will not like[X]
        thousands of requests per second, which means only
        one -- the flood wait error. To omit this, we limit
        the total size of files uploaded at the same time
        by the [G0b]--max-bytes[X] option, and the total amount by
        the [G0b]--max-workers[X]. Algorithm is simple: we will
        iterate over files (if directory specified) and
        decrement the [G0b]--max-bytes[X] by file size, then
        decrement by one the [G0b]--max-workers[X]. Upload list
        will expand until [G0b]--max-workers[X] or [G0b]--max-bytes[X]
        values > 0, otherwise launch [B0b]file-upload[X] process.
            By default, [G0b]--max-bytes[X]=[W0b]200MB[X] and the
        [G0b]--max-workers[X]=[W0b]10[X]; as [B0b]file-upload[X] should push
        to remote at least one file, -- it [W0b]will accept[X]
        target which bytesize is > than [G0b]--max-bytes[X].

        [M0b]|||||| Searching Files ||||||[X]

        After you upload some files, you may list them, try:
            [W1b]tgbox-cli file-search[X]

        [B0b]file-search[X] without any [C0b]filters[X] will return you an
        interactive list of all files that was uploaded to
        your Box, however, using [C0b]them[X] will allow you to
        [W0b]search[X] for specified files only. See this:
            [W1b]tgbox-cli file-search mime=audio max_size=10MB[X]

        Such [C0b]filters[X] will search [W0b]only[X] for audio files (by [C0b]mime[X]
        type) which size is < than 10MB ([C0b]max_size[X]). The [C0b]filters[X]
        [W0b]isn't[X] [G0b]options[X] and [W0b]shouldn't[X] start with dashes. [W0b]By default[X]
        search works in the "[W0b]include state[X]": file [W0b]must match the[X]
        [W0b]specified filters[X] to be returned, however, there is also
        an "[W0b]exclude state[X]": [W0b]matched files isn't returned[X]. You can
        switch this "states" with a [C0b]special flag[X] that starts with
        the two plus symbols -- [C0b]++include[X] ([C0b]+i[X]) and [C0b]++exclude[X] ([C0b]+e[X])
        |
        A file should be matched by [W0b]all[X] [C0b]filters[X] to be returned
        (works like [R0b]AND[X]), after one mismatch file will be skipped.
        |
        This will return all audio files except the FLAC:
            [W1b]tgbox-cli file-search mime=audio ++exclude mime=x-flac[X]

        The [W0b]most powerful[X] [C0b]filter[X] is the one named [C0b]scope[X]. The TGBOX built
        in a way that to search for files we need to iterate [W0b]over whole[X]
        local Box, decrypt file's attributes and compare them with your
        [C0b]filters[X]. While this isn't a problem for small Box, the ones who
        have a monster-size ([W0b]many small uploads[X]) containers may end up
        waiting for minute (or [W0b]longer[X]) to complete search process.
        |
        The TGBOX [W0b]effectually[X] storing abstract directories that code
        makes from every unique file path of every file you uploaded;
        so we can make a [W0b]quick fetch[X] of all files in specified
        directory. That's what the "[C0b]scope[X]" do.
        |
        Let's imagine that you have a [W0b]*many*[X] files in your Box. You
        want to find a nice track by name "[W0b]Spit[X]" of amazing singer,
        [W0b]Poppy[X]. You totally know that it has the word "[W0b]Spit[X]" in
        name and also you're sure that it's somewhere in the
        [W0b]/home/user/Music/[X] directory (has this file path).
        |
        You can make the next request to the [B0b]file-search[X] command:
            [W1b]tgbox-cli file-search file_name=Spit scope=/home/user/Music[X]

        This will search for files which file path is [W0b]/home/user/Music[X],
        thus, [W0b]will omit[X] all other directories that you don't want. All
        sub-directories of [W0b]/home/user/Music[X] will be [W0b]also searched on[X].

        Except the [C0b]scope[X], you can perform fast search by specifying
        [C0b]min_id[X], [C0b]max_id[X], or [C0b]id[X] filters. [W0b]You can duplicate[X] [C0b]filters[X]:
            [W1b]tgbox-cli file-search id=35 id=46[X]

        [Y0b]See[X] [W1b]tgbox-cli file-search --help[X] [Y0b]for all supported filters.[X]

        [M0b]|||||| Downloading Files ||||||[X]

        File downloading is often a simple routine. See this:
            [W1b]tgbox-cli file-download max_id=100 +e mime=video[X]

        The [B0b]file-download[X] will search a target files by [C0b]filters[X]
        (like [B0b]file-search[X]) and download them to the [W0b]DownloadsTGBOX[X]
        folder, [W0b]preserving[X] the actual file path. The command above
        will download all files that [W0b]ID is < 100[X] & [W0b]mime type of[X]
        [W0b]which is not a video[X]. This is only an example, [B0b]file-download[X]
        support all of the [C0b]filters[X] that support [B0b]file-search[X].

        You can specify [G0b]--locate[X] flag to open downloaded file
        in a file explorer (system default), as well as the
        [G0b]--show[X] to open it (by the system default app by the
        mime type). The last can be useful, i.e., to watch big
        video while it's being downloaded. [Y0b]Make sure to use[X]
        [Y0b]it on a single download[X], otherwise it can be a [W0b]mess[X].

        [B0b]file-download[X] support [W0b]balancing[X] via [G0b]--max-bytes[X] and
        the [G0b]--max-workers[X] options. See the end of the
        [M0b]Uploading Files[X] chapter to master this.

        If your download was interrupted for some reason then
        [B0b]file-download[X] will [W0b]auto download[X] missing blocks. You
        can also specify the [G0b]--offset[X] if necessary.

        [M0b]|||||| Removing Files ||||||[X]

        You can easily remove uploaded files by [C0b]filters[X]:
            [W1b]tgbox-cli file-remove mime=image +e file_name=2023[X]

        The command in this example will [W0b]delete[X] all images
        from your [W0b]Local and Remote[X] boxes except those who
        have a "2023" in a file name. Sure, [B0b]file-remove[X]
        support all of the [C0b]filters[X] described before. You
        can also remove files [W0b]from the LocalBox only[X] by
        using the [G0b]--local[X] flag and force TGBOX-CLI to
        [W0b]ask you[X] for each file by the [G0b]--ask-before-remove[X].

        [M0b]|||||| Changing File attributes ||||||[X]

        The default file attributes (not CAttrs) is the
        [W0b]mime[X], [W0b]file_name[X], [W0b]file_path[X], ... etc. Probably the
        most interesting is the last two, as you may want
        to [W0b]change name or path[X] of some file(s). This can
        be easily done via [B0b]file-attr-edit[X] command:
            [W1b]tgbox-cli file-attr-edit mime=image -a\[X]
                [W1b]file_path=/home/non/Pictures[X]

        As you can see, selecting is done by [C0b]filters[X]. We
        specify attribute with the [G0b]--attribute[X] ([G0b]-a[X])
        option. The example above will [W0b]change[X] the
        file path of every image in your Box [W0b]to[X]
        [W0b]/home/non/Pictures[X] path. We can say that
        this is something like "[W0b]move to[X]" operation.

        [X1b]! The same can be done with the "file_name"[X]

        [Y0b]Please note[X] that we [W0b]can not[X] change file after it
        was uploaded, so we store your updates encrypted
        in the Telegram File "[W0b]caption[X]". It has limit of
        [W0b]~2KB[X] and [W0b]~4KB[X] for Telegram [W0b]Premium[X] users.

    [W0b]EXTENDED USAGE[X]
        [M0b]|||||| Box Sharing ||||||[X]

        Let's assume that we have two friends: the [R0b]A[X]lice
        and [C0b]B[X]ob. [R0b]Alice[X] wants to share her Box with [C0b]Bob[X].

        [W0b]Step one[X]: [R0b]Alice[X] [W0b]should add[X] [C0b]Bob[X] to her RemoteBox
        [W0b]Telegram channel[X] and [Y0b]optionally[X] grant some admin
        permissions, so [C0b]Bob[X] [W0b]will be able to upload files[X]
        by himself and not download-only. This will be
        done [W0b]outside of TGBOX-CLI[X], by the [W0b]Telegram app[X];
        [X1b]|[X]
        [W0b]Step two[X] [X1b](after Alice added Bob to her RemoteBox)[X]:
        [C0b]Bob[X] will need to use a [B0b]box-list[X] with [G0b]--remote[X] to
        list & find [R0b]Alice[X]'s shiny Box. This command will
        return numbered [W0b]list of all RemoteBoxes[X] found on
        account. [C0b]Bob[X] [W0b]will need to take a number[X] of the
        corresponding [R0b]Alice[X]'s [W0b]RemoteBox[X] to go further;
        [X1b]|[X]
        [W0b]Step three[X]: [C0b]Bob[X] will need to [W0b]make a RequestKey[X]
        to [R0b]Alice[X]'s RemoteBox. This can be easily done via
        [B0b]box-request[X] command. Previously obtained number
        should be specified [W0b]as the[X] [G0b]--number[X]. [C0b]Bob[X] [W0b]will[X]
        [W0b]share received RequestKey with the[X] [R0b]Alice[X];
        [X1b]|[X]
        [W0b]Step four[X]: [R0b]A[X] will make [W0b]a ShareKey[X] with the [C0b]B[X]'s
        [W0b]RequestKey and the[X] [B0b]box-share[X] command. Key of [C0b]B[X]
        must be specified as [G0b]--requestkey[X] option. [R0b]A[X]
        [W0b]will share[X] resulted ShareKey with the [C0b]B[X];
        [X1b]|[X]
        [W0b]Step five[X]: [C0b]B[X] [W0b]will use ShareKey and[X] [B0b]box-clone[X]
        command [W0b]to clone RemoteBox[X] and make a LocalBox;
        ShareKey must be specified as [G0b]--key[X] and the
        number of RemoteBox as [G0b]--number[X].
        [X1b]*[X]
        [G0b]Done![X]

        Real Box encryption key (the [W0b]MainKey[X]) is safely
        encrypted with the end-to-end [W0b]ECDH[X] algorithm, so
        [R0b]Alice[X] and [C0b]Bob[X] [Y0b]can exchange[X] [W0b]ShareKey[X] and [W0b]RequestKey[X]
        [Y0b]via insecure canals[X] & [W0b]only[X] [C0b]B[X] will be able to use
        ShareKey received from [R0b]A[X] to clone RemoteBox.

        [M0b]|||||| Box Syncing ||||||[X]

        Box needs to be synced [W0b]if[X] it's used by multiply
        peoples & [W0b]if[X] at least one upload files. This can be
        done with the [B0b]box-sync[X] command. [W0b]By default[X], TGBOX-CLI
        will try to use a [C0b]Fast Sync[X]: the synchronization
        [W0b]from the[X] Telegram Channel [W0b]Admin Log[X]; obviously
        this will require You [W0b]to have admin rights[X]; or,
        to be more specific, You must be [W0b]at least[X]
        [W0b]Admin with zero rights[X] (all rights off). Ask
        the Box owner to make you such Admin. Note
        that you need to sync [W0b]within 48 hours[X] after
        the file was uploaded, because later Log will be cleared.

        Alternatively, you can make a [C0b]Deep Sync[X]. It
        can be enabled by specifying the [G0b]--deep[X] flag.

        The [B0b]box-sync[X] [G0b]--deep[X] without additional options
        will check [W0b]every file[X] in RemoteBox and compare it
        with one from LocalBox. Typically, we [W0b]don't[X]
        need a full synchronization, because it can be
        [W0b]really[X] slow and useless. We can track the state of
        our LocalBox and RemoteBox with the [B0b]file-last-id[X]
        command. If your remote is ahead, use a
        [G0b]--start-from-id[X] on [B0b]box-sync[X] and specify it as
        last file ID in your LocalBox. This will
        download all info about the latest pushed files.

        [M0b]|||||| File Sharing ||||||[X]

        Taking into account the previous example of [M0b]Box Sharing[X],
        let's assume that this time [R0b]Alice[X] wants to share one of
        the files with her well-known friend, [C0b]Bob[X]. Every file in
        TGBOX has its own, [W0b]unique[X] FileKey, which is a result of
        SHA256 over MainKey and FileSalt, so [R0b]Alice[X] can easily
        disclose encrypted files from her Box [W0b]without[X] fear that
        this will give some information about [W0b]secret[X] MainKey to [C0b]Bob[X];

        To share file, [R0b]Alice[X] & [C0b]Bob[X] should go through these steps:
        [X1b]*[X]
        [W0b]Step one[X]: [R0b]Alice[X] need to decide which file she wants to share
        with [C0b]Bob[X], then, [W0b]forward it[X] to [C0b]Bob[X] from her RemoteBox. She
        can use [B0b]file-forward[X] command or do it from Telegram;
        [X1b]|[X]
        [W0b]Step two[X]: [C0b]Bob[X] will need to forward received from [R0b]Alice[X] file
        to his RemoteBox (within Telegram), then use the TGBOX-CLI
        command [B0b]file-search[X] with [G0b]--non-imported[X] to list file of [R0b]A[X];
        [X1b]|[X]
        [W0b]Step three[X]: the [B0b]file-search[X] [G0b]--non-imported[X] will list file
        with the already created [W0b]RequestKey[X]. [C0b]Bob[X] will need
        to copy it and send to [R0b]Alice[X];
        [X1b]|[X]
        [W0b]Step four[X]: with [C0b]Bob[X]'s RequestKey, [R0b]Alice[X] will use a
        [B0b]file-share[X] command with the [G0b]--requestkey[X] option
        specified. This will give a [W0b]ShareKey[X], which
        [R0b]Alice[X] will send to [C0b]Bob[X];
        [X1b]|[X]
        [W0b]Step five[X]: with ShareKey from [R0b]Alice[X], [C0b]Bob[X] will be
        able to decrypt and import target file by the
        [B0b]file-import[X] command, [G0b]--key[X] and [G0b]--id[X] options.
        [X1b]*[X]
        [G0b]Done![X]

        If you want to import file from other Box, [W0b]make sure[X]
        [W0b]not to lose your LocalBox[X] (DB file), because it's
        the only place where we store imported file keys. You
        will need to [W0b]request for file again to restore it[X].

        [M0b]|||||| Directory Sharing ||||||[X]

        Instead of sharing multiply files separately, [R0b]Alice[X] can
        share with [C0b]Bob[X] an [W0b]entire Directory[X]. This is pretty
        similar to the [M0b]File Sharing[X], but make use of the two
        new commands: the [B0b]dir-forward[X] & [B0b]dir-share[X].

        The TGBOX Protocol [W0b]can not share subdirectories[X]. So,
        for example, if [R0b]Alice[X] decides to share all arts
        from her abstract Box folder [W0b]/home/alice/Arts[X], then
        using the next commands will only affect files that
        placed [W0b]directly[X] in [W0b]/home/alice/Arts[X] folder. Files
        from the (i.e) [W0b]/home/alice/Arts[X][X1b]/Cats[X] will be ignored.

        [Y0b]Every nested directory should be shared separately.[X]

        So, [R0b]Alice[X] has a directory [W0b]/home/alice/Arts[X] with
        many arts in it. Making a ShareKey for each file and
        sharing it separately (as in [M0b]File Sharing[X]) can be
        really annoying. See a use of the [B0b]dir-share[X] command:

        [W0b]Step one[X]: [R0b]Alice[X] is sure about dir she wants to share,
        that is [W0b]/home/alice/Arts[X]. To share all files from it,
        she will invoke [B0b]dir-forward[X] command. This command
        requires the [G0b]--directory[X] and [G0b]--chat[X] options. The
        First one is obvious, the second should be a [W0b]Telegram[X]
        [W0b]chat[X] to forward. [R0b]Alice[X] can specify it as [C0b]Bob[X]'s
        [W0b]@username[X] (in this case, [C0b]Bob[X] will need to forward
        all received files to his Box by himself) or [C0b]Bob[X]
        can invite [R0b]Alice[X] to his [W0b]Box[X] and grant her
        Admin rights (only "[W0b]Post Messages[X]" right will
        be enough, in this case [R0b]Alice[X] will be only able
        to post, not edit or delete files of [C0b]Bob[X]), so
        [R0b]Alice[X] can [W0b]forward directly[X] to [W0b]Box[X] of [C0b]Bob[X]. If
        [C0b]Bob[X]'s [W0b]RemoteBox[X] (Channel) is a private one, [R0b]Alice[X]
        can specify [G0b]--chat[X] as [W0b]RemoteBox name[X] with the
        [G0b]--chat-as-name[X] option. For example:
            [W1b]tgbox-cli dir-forward --chat BobBox --chat-as-name[X]
            --------------------------------------------------
            This will search for ([W0b]first[X]) Channel with "BobBox"
            name and will forward all target dir files to it;
        [X1b]*[X]
        [W0b]Step two[X]: [R0b]Alice[X] successfully forwarded her files
        to [C0b]Bob[X]'s [W0b]RemoteBox[X]. Now [C0b]Bob[X] will need to use a
        [B0b]file-search[X] command with [G0b]--non-imported[X] flag and
        take [W0b]RequestKey[X] for [Y0b]the latest one[X] (with the
        [Y0b]biggest ID[X]) and send it to [R0b]Alice[X] in any way;
        [X1b]*[X]
        [W0b]Step three[X]: Now [R0b]Alice[X] has a [W0b]RequestKey[X] from
        [C0b]Bob[X]. She will use the [B0b]dir-share[X] command, set
        [G0b]--requestkey[X] ([G0b]-r[X]) and [G0b]--directory[X] ([G0b]-d[X]) options
        and then will send the resulted [W0b]ShareKey[X] to
        [C0b]Bob[X] (insecure canals are [W0b]OK[X], as [W0b]RequestKey[X])
        [X1b]*[X]
        [W0b]Step four[X]: with [W0b]ShareKey[X] from [R0b]Alice[X], [C0b]Bob[X] can
        make a [W0b]bunch import[X]. He will use [B0b]file-import[X]
        command in the same way as in [M0b]File Sharing[X], by
        specifying [G0b]--key[X] and [G0b]--id[X], the only difference
        will be addition of [G0b]--propagate[X] flag. This
        will tell to [W0b]CLI[X] that [C0b]Bob[X] wants to import
        file [W0b]from most recent to oldest[X] until
        the first import error is encountered.
        [X1b]*[X]
        [G0b]Done![X]

        [W0b]Additional Information[X]
        [W0b]----------------------[X]
        [W0b]1[X]/
        In a [M0b]File Sharing[X] chapter we were making a [W0b]ShareKey[X]
        of the [W0b]FileKey[X], -- the unique Key, which can decrypt
        [W0b]only one file[X]. Here we share the [W0b]DirectoryKey[X], this
        is a Key from which we're [W0b]making FileKeys[X]. Every
        unique Directory [W0b]has its own DirectoryKey[X], thus,
        [W0b]should be shared separately[X]. By making a [W0b]ShareKey[X]
        of [W0b]DirectoryKey[X], [R0b]Giver[X] [Y0b]grants access to every[X]
        [Y0b]existing AND future file that will be attached[X]
        [Y0b]to this directory[X] to [C0b]Requester[X] (if [C0b]Requester[X] has
        direct access to [R0b]Giver[X]'s [W0b]RemoteBox[X] contents). If
        you don't want this, use [B0b]file-share[X] command instead.
        |
        See a [W0b]TGBOX docs[X] for more info about [W0b]Protocol[X].

        [W0b]2[X]/
        The [B0b]dir-forward[X] is a some kind of [W0b]syntactic sugar[X]
        over the [B0b]file-forward[X] command. It is in [W0b]CLI[X] to
        make a [R0b]Giver[X]'s routine easier. As TGBOX Protocol
        [W0b]doesn't support sharing subdirectories[X], one [W0b]should[X]
        [W0b]omit[X] forwarding all nested folders. We achieve this
        by using the [C0b]non_recursive_scope[X] filter. See this:
            [W1b]tgbox-cli file-forward scope=/home/user/folder\[X]
                [W1b]non_recursive_scope=True --chat @username[X]

    [W0b]THE TOOLS[X]
        [M0b]|||||| Changing Defaults ||||||[X]

        The TGBOX protocol has some [W0b]inbuilt defaults[X] that you may
        want to change. For example, there is [B1b]METADATA_MAX[X]
        default, which defines [W0b]the max bytesize of the metadata[X];
        or [B1b]FILE_PATH_MAX[X], which specify [W0b]the max length of file[X]
        [W0b]path[X]. You probably [Y0b]don't need to change them[X], because
        it [Y0b]may break compatibility[X] with Boxes of other people:
        for example, to share file, recipient [W0b]will need[X] to have
        [W0b]the same[X] (or more) METADATA_MAX/FILE_PATH_MAX.

        By default, [B1b]METADATA_MAX[X]=[W0b]1000000[X] (1MB) and the
        [B1b]FILE_PATH_MAX[X]=[W0b]4096[X] (4KiB) which is more than
        enough for typical usage. However, if you
        [W0b]really[X] want to increase them, you can use the
        [B0b]box-default[X] command, see this:
            [W1b]tgbox-cli box-default METADATA_MAX=1677721[X]

        The command above will change [B1b]METADATA_MAX[X] to the
        [W0b]max allowed[X] by TGBOX protocol value -- [W0b]16MiB[X]-1. This
        will allow you to attach some crazy-big CAtrrs &
        [Y0b]will disable[X] file sharing with peoples which
        Box has [B1b]METADATA_MAX[X] lower than yours. Typically
        you [W0b]don't want this[X] as it's almost useless.

        There is also [B1b]DOWNLOAD_PATH[X], [B1b]DEF_NO_FOLDER[X] &
        [B1b]DEF_UNK_FOLDER[X] defaults. The [B1b]DOWNLOAD_PATH[X]
        define [W0b]the default path to which files from[X]
        [W0b]RemoteBox will be downloaded onto your machine[X];
        the [B1b]DEF_NO_FOLDER[X] define [W0b]default abstract[X]
        [W0b]folder which will be attached to file on[X]
        [W0b]import from other Box[X] if [G0b]--file-path[X] option
        is not specified; [B1b]DEF_UNK_FOLDER[X] is [W0b]the[X]
        [W0b]folder to which file will be downloaded[X] if
        [G0b]--hide-folder[X] flag was specified on the
        TGBOX-CLI [B0b]file-download[X] command.

        Probably, the [W0b]only[X] useful for end-users one
        is the [B1b]DOWNLOAD_PATH[X] default. You can change
        it from [W0b]DownloadsTGBOX[X] folder to any other:
            [W1b]tgbox-cli box-default DOWNLOAD_PATH=Downloads[X]

        [M0b]|||||| Logging & Log Files ||||||[X]

        The TGBOX & TGBOX-CLI can write [Y0b]Warnings[X] and [R0b]Errors[X], as well
        as [W1b]Information[X] occurred on the usage. By default, TGBOX-CLI
        Log Level is the [Y0b]Warning[X] (all [Y0b]Warning[X]+ events will be written
        to the Log file, other [W0b]ignored[X]), however, you can easily
        change it with the [B1b]TGBOX_CLI_LOGLEVEL[X] environment variable
        as stated in the [W0b]beginning of this help file[X]. The log files
        can help you to locate error and is very important for
        developing any apps [X1b](especially buggy TGBOX-CLI one:)[X], so
        you're welcomed to report "[W0b]things that don't work[X]" on
        the [W0b]Issues[X] tab of official TGBOX-CLI GitHub page:
            [B0b]github.com/NotStatilko/tgbox-cli/issues[X]

        There are some commands to manage Logging file: [B0b]logfile-open[X]
        will open Log file with the default system's text editor
        app, [B0b]logfile-size[X] will print the total size of Log file,
        the [B0b]logfile-wipe[X] will clear it, and [B0b]logfile-send[X] will
        allow you to send logfile to [W0b]any[X] Telegram chat. Log file
        [W0b]will never store any sensitive data[X] (feel free to check
        it). Also, size of Log file [W0b]may rise over time[X]. Use
        the already mentioned command to completely empty it.

        [M0b]|||||| Info Commands & Directory List ||||||[X]

        [W0b]Info Commands[X]
        [W0b]-------------[X]

        There are some information commands: the [B0b]box-info[X] will
        give you comprehensive information about your Local
        and Remote boxes; [B0b]account-info[X] will show information
        about Telegram account you currently use ([G0b]--show-phone[X]
        flag can be used [W0b]to unhide[X] phone number); and [B0b]cli-info[X]
        will show you information about your [W0b]current build[X]
        and [W0b]fast modules[X] of the TGBOX-CLI application.

        [W0b]Directory List[X]
        [W0b]--------------[X]

        With [B0b]dir-list[X] command you can list [W0b]all[X] directories
        that your LocalBox contains. This can be useful
        to remind you about some absolute file path
        that you can use for the [C0b]scope[X] filter.

        [X1b]PRO TIP: Combine it with the grep![X]

        [M0b]|||||| Chat inside your Box ||||||[X]

        [W0b]Version 1.3[X] of TGBOX-CLI introduces the new feature:
        [W0b]Chat inside your Box[X]! It can be created/opened with
        the new command: [B0b]chat-open[X]. Chat is [W0b]not[X] a part of
        the TGBOX Protocol, rather Proof of Concept which I
        wanted to implement a long time ago.

        [W0b]How does Chat work?[X] It's simple! When user creates
        new Chat we form the "[W0b]CONFIG[X]" file and attach some
        CAttrs to it (i.e [W0b]Chat name[X] / [W0b]Description[X]). Actual
        file contains [W0b]zero[X] bytes. We upload this file under
        the [W0b]__BOX_CHAT__/__CONFIG__[X] Directory. Obviously,
        later we will have chance to [W0b]change[X] Chat CONFIG
        via manipulating CAttrs with [B0b]file-attr-edit[X].

        When user "[W0b]send Message[X]" to Chat, we form a zero-
        bytes File with random name and attach CAttrs
        to it (i.e [W0b]Text[X], [W0b]Author[X], etc). We will upload
        this file under directory which will contain
        [C0b]Topic[X] and [C0b]Date[X]. Both of this [W0b]can[X] be changed by
        User. By default, [C0b]Topic[X] is "[C0b]Main[X]" and [C0b]Date[X] is
        [W0b]current date[X] in a format of [C0b]%Y/%m/%d[X] (i.e [C0b]2024/06/23[X]).

        Absolute Directory of Message will be the next:
         [W0b]__BOX_CHAT__/__CHAT__/Main/2024/06/23[X]. As you
         can expect, [B0b]chat-open[X] will be able to show
         messages only for selected [C0b]Topic[X] or [C0b]Date[X]:
            [W1b]tgbox-cli chat-open --topic Music[X]
            [W1b]tgbox-cli chat-open --date 2024/06/23[X]
            [W1b]tgbox-cli chat-open --date 2024/06[X]
            [W1b]tgbox-cli chat-open --date 2024[X]

        If no Messages found in your [C0b]Topic[X], -- you can send
        one and [W0b]start conversation[X] here! Another user will
        get it after pressing [W0b]ENTER[X] key or automatically
        after some time if "[W0b]Auto Mode[X]" was selected.

        By default, TGBOX-CLI [W0b]will hide[X] the Files under the
        [W0b]__BOX_CHAT__[X] directory (i.e in [B0b]file-search[X] or [B0b]dir-list[X])
        however, [W0b]you can request them[X] explicitly
            [W1b]tgbox-cli dir-list --show-box-chat[X]
            [W1b]tgbox-cli file-search scope=__BOX_CHAT__[X]

        As [W0b]__BOX_CHAT__[X] contents is just a [W0b]typical files[X],
        you can use all "[B0b]file-*[X]" commands on them.

        [Y0b]Please note[X] that "Box Chat" is just [W0b]a way of[X]
        [W0b]representing files[X], [Y0b]not[X] a really full & Secure
        E2E Chat. It [Y0b]can't replace[X] Secret Chat of Telegram
        or any other Secure messaging platform!!!

        [M0b]|||||| Hidden Commands ||||||[X]

        The TGBOX-CLI has a few hidden commands. For example,
        there is [B0b]sk-gen[X], which generates [W0b]SessionKey[X] used to save
        the state of the current CLI session. The [B0b]sk-gen[X] is
        presented on the list of commands in the [B0b]cli-init[X].
        There is also [B0b]phrase-gen[X], which generates a number of
        [G0b]--words[X] that can be used as Box phrase (-> [W0b]make_basekey[X]
        -> [W0b]BaseKey[X]).

        The most interesting (for developers :) one is the [B0b]python[X]
        command. It can start an [W0b]Interactive Python Interpreter[X] with
        the TGBOX-CLI [W0b]globals()[X]. You can use this command to make
        direct access to the [W0b]DecryptedLocalBox[X] or [W0b]DecryptedRemoteBox[X]
        objects (via [W0b]Objects[X] variable) and [W0b]manually[X] do things to TGBOX.
        |
        The [B0b]python[X] command also allows users to [W0b]execute some scripts[X]
        written for the TGBOX-CLI. With [G0b]--execute[X] option you can
        specify a path to a Python file. [R0b]NEVER EXECUTE SCRIPTS THAT[X]
        [R0b]YOU PERSONALLY DON'T UNDERSTAND OR DON'T TRUST[X].

        Make a [W0b]script.py[X] file and fill it with this code:

        [X1b]# ======================================== #[X]
        [X1b]# box-info --bytesize-total implementation #[X]

        dlb = Objects.dlb [X1b]# python command has built-in link to[X]
                          [X1b]# the click.get_current_context().obj[X]
        total_bytes = [R1b]0[X]
        [R0b]for[X] dlbf [R0b]in[X] sync_async_gen(dlb.files()):
            total_bytes += dlbf.size

        [M0b]print[X](format_bytes(total_bytes))

        [X1b]# The 'python' command has all functions of TGBOX-CLI,[X]
        [X1b]# i.e, format_bytes func here is from tgbox_cli.tools[X]

        [X1b]# ======================================== #[X]

        Then, execute a [B0b]python[X] command as follows:
            [W1b]tgbox-cli python --execute script.py[X]

        Firstly, the python command with [G0b]--execute[X] specified will
        [Y0b]warn[X] you. Again, [Y0b]NEVER[X] run code you [Y0b]DON'T[X] trust. Secondly,
        the TGBOX-CLI will save the code from file in the constant-
        function [W0b]EXEC_SCRIPT[X]. To run it, write [W0b]EXEC_SCRIPT()[X].

        The code above will [W0b]calculate the total size of your Box[X]
        [W0b]in bytes[X], then format it and print to your terminal.

        You can [W0b]disable[X] Interactive Interpreter and run code directly:
            [W1b]tgbox-cli python --execute script.py --non-interactive[X]

        I believe this can make a TGBOX-CLI more flexible. [C1b]With great[X]
        [C1b]power comes great responsibility[X]. [W0b]Never[X] hurt peoples that
        don't know what they do. Peoples, [W0b]know[X] what you do.

[W0b]THE END & THANKS[X]
    This is it! A finish of this README text! I hope it gave
    you some meaningful understanding on how to use this CLI app
    so you can use it on expert level now!

    Thanks to You, the human in front of this Terminal!
    Without You my code is [W1b]absolutely useless[X].

    Thanks to all involved projects, on which TGBOX and its CLI
    version were built: the Telegram, Telethon, Crypto libs devs,
    the AIOSqlite devs and *MANY* others. See full list of projects
    TGBOX use on the GitHub page: [B0b]github.com/NonProjects/tgbox[X]

    Thanks to all people who inspire me, and *BIG* thanks to the
    [W0b]HEROES[X] from the [Y0br]UKRAINIAN[X] [B0br]ARMY[X]. I [W0b]don't[X] think this
    project would be possible without their [W0b]amazing[X] resistance.

    If you find this app useful, then, please, consider
    [W0b]TO DONATE FOR[X] [Y0br]ARMY[X] [W1b]OF[X] [B0br]UKRAINE[X]: see [B0b]u24.gov.ua[X]

    Regards. [X1bli]The Non.[X] [X0bli](Try Ozzy Osbourne)[X]
